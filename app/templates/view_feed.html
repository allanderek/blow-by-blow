{% extends "base.html" %}
{% block page_css %}
<style>
#feed-contents{

}

.feed-title {
    text-align: center;
    font-size: 3rem;
    color: blue;
    padding: 10px;
    padding-bottom: 15px;
}

.feed-moment{
    list-style-type: none;
    border: 1px solid #6AC5AC;
}

.comment-time{
    color: orange;
}
.comment-text{
    padding-left: 1em;
    color: blue;
}
</style>
{% endblock %}
{% block content %}

<div id="feed-contents" class="main-column">
<div class='main-column feed-title'>
    {{db_feed.feed_title}}
</div>


{% if secret is not none %}
<div id="update-controls" class="main-column">
    <form id='change-title' method="POST"
          action="{{ url_for('update_feed',
                             feed_no=db_feed.id,
                             secret=secret) }}">
        {{ update_feed_form.hidden_tag() }}
        {{ update_feed_form.title_text.label }}
        {{ update_feed_form.title_text() }}
        <button type="submit"
                class="change-title-button"
                id="update-title-button"
                name="update-title-button">Update</button>
    </form>
    
    <div id="send-viewers-link">
        Do not send people the link in your address bar, that is your
        private link to author the feed. Send viewers here:
        <a href="{{db_feed.viewers_link}}">{{db_feed.viewers_link}}</a>
    </div>
</div><!-- End of update-controls -->
{% endif %}



{% if secret is not none %}
    <div id="commentate-area">
        <form id="make-comment"
              method="POST"
              action="{{ url_for('update_feed', feed_no=db_feed.id,
                                 secret=secret) }}">
                {{ update_feed_form.hidden_tag() }}
                {{ update_feed_form.comment_text.label }}
                {{ update_feed_form.comment_text() }}
                <button type="submit"
                        class="commentate_button"
                        id="commentate_button"
                        name="commentate_button">Update</button>
            </form>
    </div>
{% endif %}


<ul id="feed-moment-list">
    {% for moment in db_feed.moments %}
        <li class="feed-moment">
            <div class="comment-time">{{moment.date_time.isoformat()}}</div>
            <div class="comment-text">{{moment.content}}</div>
            </li>
    {% endfor %}
</ul>

</div><!-- End of div feed-contents -->

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script>
    /* We have now stopped using server-side events and we're just
       going to instead use some ajax to automatically re-load the
       event-stream.
    */
</script>


{% endblock %}
