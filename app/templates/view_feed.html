{% extends "base.html" %}
{% block page_css %}
<style>
.feed-title {
    font-size: 3rem;
    color: blue;
}
.comment-time{
    color: orange;
}
.comment-text{
    color: blue;
}
</style>
{% endblock %}
{% block content %}
<span class='feed-title'>
    {{db_feed.feed_title}}
</span>
    {% if secret is not none %}
    <form id='change-title' method="POST"
          action="{{ url_for('update_feed',
                             feed_no=db_feed.id,
                             secret=secret) }}">
        {{ update_feed_form.hidden_tag() }}
        {{ update_feed_form.title_text.label }}
        {{ update_feed_form.title_text() }}
        <button type="submit"
                class="change-title-button"
                id="update-title-button"
                name="update-title-button">Update</button>
    </form>
    {% endif %}
    
{% if secret is not none %}
<div id="send-viewers-link">
    Do not send people the link in your address bar, that is your
    private link to author the feed. Send viewers here:
    <a href="{{db_feed.viewers_link}}">{{db_feed.viewers_link}}</a>
</div>
{% endif %}



{% if secret is not none %}
    <div id="commentate-area">
        <form id="make-comment"
              method="POST"
              action="{{ url_for('update_feed', feed_no=db_feed.id,
                                 secret=secret) }}">
                {{ update_feed_form.hidden_tag() }}
                {{ update_feed_form.comment_text.label }}
                {{ update_feed_form.comment_text() }}
                <button type="submit"
                        class="commentate_button"
                        id="commentate_button"
                        name="commentate_button">Update</button>
            </form>
    </div>
{% endif %}


<ul id="feed-moment-list">
    {% for moment in db_feed.moments %}
        <li><span class="comment-time">{{moment.date_time.isoformat()}}</span>
            <span class="comment-text">{{moment.content}}</span></li>
    {% endfor %}
</ul>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script>
    /* We have now stopped using server-side events and we're just
       going to instead use some ajax to automatically re-load the
       event-stream.
    */
</script>


{% endblock %}
